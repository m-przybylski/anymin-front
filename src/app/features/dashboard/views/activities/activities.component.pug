.activities(*ngIf="profileActivities$ | async as profileActivities")
  .container(*ngIf="isLoaded$  | async as isLoaded; else loader")
    plat-activities-balance([activityListType]="listType", [isLoaded]="isLoaded",
    [combinedBalance]="combinedBalance$ | async",
    [combinedBlockedBalance]="combinedBlockedBalance$ | async", [balance]="balance$ | async")
    .non-activities(*ngIf="!profileActivities.length")
      am-core-image-display.non-activities__image(imgName="activities")
      span {{ "EXPERT_ACTIVITIES.NON_ACTIVITIES_HEADER" | translate }}

    .activities-lists(*ngIf="profileActivities.length")
      .important-list(*ngIf="importantActivitiesCounter$ | async as importantActivitiesCounter")
        .important-list__header
          span {{"EXPERT_ACTIVITIES.IMPORTANT_LIST_COUNTER_TITLE" | translate: {currentValue: (displayedImportantActivities$ | async).length, counter: importantActivitiesCounter} }}
          ng-container(*ngIf="importantActivitiesCounter > (importantActivitiesOffset$ | async)")
            a((click)="hideMore()",
            *ngIf="isImportantListShown$ | async")
              | {{ "EXPERT_ACTIVITIES.IMPORTANT_LIST_HIDE" | translate }}
            a((click)="showMore()",
            *ngIf="!(isImportantListShown$ | async)")
              | {{ "EXPERT_ACTIVITIES.IMPORTANT_LIST_SHOW_ALL" | translate }}

        ul.important-list__container
          li(*ngFor='let activity of displayedImportantActivities$ | async; trackBy:trackByImportantActivities', [@animation])
            plat-activity-row(
            [isImportant]="true",
            [activity]="activity",
            [listType]="listType",
            (activityRowClicked)="onActivityRowClicked(activity, true)",
            )

      .all-list
        .all-list__header
          span {{"EXPERT_ACTIVITIES.ALL_LIST_COUNTER_TITLE" | translate}}
          a.activities__filter-button
            span(plat-icon, iconClass="filters")
            span {{ "EXPERT_ACTIVITIES.ALL_LIST_SHOW_FILTERS" | translate }}

        ul.all-list__container
          li(*ngFor='let profileActivity of profileActivities; trackBy:trackByActivities', [@animation])
            plat-activity-row(
            [activity]="profileActivity.activity",
            [isImportant]="profileActivity.isImportant",
            [listType]="listType",
            (activityRowClicked)="onActivityRowClicked(profileActivity.activity, profileActivity.isImportant)",
            )
      .bottom
        button.button-mobile(plat-stroked-button, *ngIf="isMoreActivity$ | async", (click)="loadMore()")
          span {{ 'EXPERT_ACTIVITIES.LOAD_MORE' | translate }}

ng-template(#loader)
  .container
    plat-activities-balance([activityListType]="listType")
    .activities-lists
      .all-list
        .all-list__header
          span {{ "EXPERT_ACTIVITIES.ALL_LIST_COUNTER_TITLE" | translate }}

        ul.activity-loader-list
          li.activity-loader-list__item
            plat-consultation-row-loader
          li.activity-loader-list__item
            plat-consultation-row-loader
          li.activity-loader-list__item
            plat-consultation-row-loader
          li.activity-loader-list__item
            plat-consultation-row-loader

